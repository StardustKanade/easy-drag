/*!
 * easy-drag v1.0.0
 * Author: StardustKanade
 * License: MIT
 * Website: https://github.com/StardustKanade/easy-drag#readme
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).EasyDrag=t()}(this,(function(){"use strict";var e=function(){return e=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},e.apply(this,arguments)};function t(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function l(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,l)}u((r=r.apply(e,t||[])).next())}))}function n(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=l(0),a.throw=l(1),a.return=l(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(l){return function(u){return function(l){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,l[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&l[0]?r.return:l[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,l[1])).done)return o;switch(r=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,r=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==l[0]&&2!==l[0])){i=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){i.label=l[1];break}if(6===l[0]&&i.label<o[1]){i.label=o[1],o=l;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(l);break}o[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(e){l=[6,e],r=0}finally{n=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,u])}}}return"function"==typeof SuppressedError&&SuppressedError,function(r,o){var i=this,a=r,l=null,u=null,c={time:200},s={x:0,y:0};if(!(r instanceof HTMLElement))throw new Error("Error in parameter 1: Please provide an Element");a=r,"object"==typeof o&&null!==o&&o.constructor===Object&&(c=e(e({},c),o));var f=function(){/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?(a.addEventListener("touchstart",m,{passive:!1}),a.addEventListener("touchmove",y,{passive:!1}),a.addEventListener("touchend",h)):(a.addEventListener("dragstart",d),a.addEventListener("dragenter",p),a.addEventListener("dragend",v))},d=function(e){var t=e.target;if(t!==a){for(;t&&t.parentElement&&"true"!==t.getAttribute("draggable");)t=t.parentElement;e.dataTransfer&&t&&(e.dataTransfer.setData("content",t.innerText),e.dataTransfer.effectAllowed="move"),l=t}},p=function(e){e.preventDefault();var t=e.target;if(a.contains(l)&&a.contains(t)&&a!==t){for(;t&&t.parentElement&&t.parentElement!==a&&t!==a;)t=t.parentElement;l!==t&&"true"!==(null==t?void 0:t.getAttribute("move"))&&b(t)}},v=function(e){e.preventDefault(),l=null},m=function(e){var t=e.touches[0].target;if(t!==a){for(;"true"!==t.getAttribute("draggable")&&t.parentElement;)t=t.parentElement;l=t,(u=t.cloneNode(!0)).removeAttribute("style"),E(e)}},y=function(e){return t(i,void 0,void 0,(function(){var t,r,o,i;return n(this,(function(n){switch(n.label){case 0:return e.preventDefault(),u?(t=e.touches[0],r=t.clientX,o=t.clientY,u.style.left=r-s.x+"px",u.style.top=o-s.y+"px",[4,A()]):[2];case 1:if(n.sent(),i=document.elementFromPoint(r,o),!a.contains(l)||!a.contains(i)||a===i)return[2];for(;i&&i.parentElement&&i.parentElement!==a&&i!==a;)i=i.parentElement;return l===i||"true"===i.getAttribute("move")||b(i),[2]}}))}))},h=function(){l=null,u&&(u.remove(),u=null,s.x=0,s.y=0)},b=function(e){if(l){var t=Math.min(w(l),w(e)),n=Math.max(w(l),w(e))+1,r=Array.from(a.children).slice(t,n).map((function(e){return{element:e,rect:e.getBoundingClientRect()}}));w(l)<w(e)?a.insertBefore(l,e.nextSibling):a.insertBefore(l,e),c.time>0&&g(r,t,n)}},g=function(e,r,o){Array.from(a.children).slice(r,o).forEach((function(r){return t(i,void 0,void 0,(function(){var t,o,i;return n(this,(function(n){switch(n.label){case 0:return o=(t=r).getBoundingClientRect(),(i=e.find((function(e){return t===e.element})))?(t===l&&(t.style.zIndex="1"),t.style.transition="none",t.style.transform="translate3d("+(i.rect.left-o.left)+"px,"+(i.rect.top-o.top)+"px,0)",[4,A()]):[3,2];case 1:n.sent(),t.style.transition="all ".concat(c.time,"ms ease"),t.style.transform="translate3d(0, 0, 0)",t.setAttribute("move","true"),t.addEventListener("transitionend",x),n.label=2;case 2:return[2]}}))}))}))},E=function(e){l&&u&&(s.x=e.touches[0].clientX-l.offsetLeft,s.y=e.touches[0].clientY-l.offsetTop,u.style.position="absolute",u.style.zIndex="10000",u.style.pointerEvents="none",u.style.opacity="0.5",u.style.left=l.offsetLeft+"px",u.style.top=l.offsetTop+"px",a.appendChild(u))},x=function(e){var t=e.target;t&&(t.removeAttribute("move"),t.removeAttribute("style"),t.removeEventListener("transitionend",x))},w=function(e){return e?Array.from(a.children).indexOf(e):-1},A=function(){return new Promise((function(e){requestAnimationFrame(e)}))};Array.from(a.children).forEach((function(e){e.setAttribute("draggable","true")})),f()}}));
